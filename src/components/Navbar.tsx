
import React from 'react';
import { Link, useLocation } from 'react-router-dom';
import { Button } from '@/components/ui/button';
import { Badge } from '@/components/ui/badge';
import { SidebarTrigger } from '@/components/ui/sidebar';
import { useAuth } from '@/features/auth';
import { useSelectedComponents } from '@/shared/contexts/SelectedComponentsContext';
import { useIsMobile } from '@/hooks/use-mobile';
import AuthButtons from './AuthButtons';

const Navbar = () => {
  const { user, isAdmin } = useAuth();
  const { selectedComponents } = useSelectedComponents();
  const location = useLocation();
  const isMobile = useIsMobile();

  const isActive = (path: string) => location.pathname === path;

  return (
    <nav className="border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 sticky top-0 z-50 w-full">
      <div className="flex justify-between h-16 px-4">
        <div className="flex items-center space-x-4">
          {/* Mobile Sidebar Trigger - Only visible on mobile */}
          <SidebarTrigger className="md:hidden" />
          
          {/* Logo - Visible on both mobile and desktop */}
          <Link to="/components" className="flex items-center">
            <svg width={isMobile ? "100" : "120"} height={isMobile ? "28" : "34"} viewBox="0 0 939 268" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect y="0.484375" width="264.83" height="267.205" rx="22.1681" fill="#D2F525"/>
              <path d="M140.958 139.398C137.052 143.226 129.338 146.357 123.814 146.357H67.9592C62.4357 146.357 61.1118 143.226 65.0175 139.398L126.148 79.481C130.054 75.6527 137.768 72.52 143.291 72.52H199.147C204.67 72.52 205.994 75.6527 202.088 79.481L140.958 139.398Z" fill="#282828"/>
              <path d="M140.873 192.197C136.968 196.026 129.253 199.158 123.73 199.158H67.8747C62.3513 199.158 61.0273 196.026 64.933 192.197L126.061 132.28C129.967 128.452 137.681 125.321 143.205 125.321H199.06C204.584 125.321 205.907 128.452 202.002 132.28L140.873 192.197Z" fill="#282828"/>
              <path d="M387.443 124.595C380.847 124.595 374.867 123.495 369.502 121.297C364.226 119.01 360.048 115.668 356.97 111.271C353.892 106.874 352.221 101.465 351.958 95.0455H373.064C373.152 97.5959 373.812 99.8385 375.043 101.773C376.274 103.708 377.945 105.247 380.056 106.39C382.166 107.446 384.629 107.973 387.443 107.973C389.818 107.973 391.884 107.622 393.643 106.918C395.49 106.126 396.941 105.027 397.996 103.62C399.052 102.125 399.579 100.278 399.579 98.0796C399.579 95.793 398.964 93.8583 397.732 92.2753C396.501 90.6044 394.83 89.1972 392.72 88.054C390.609 86.8228 388.147 85.7235 385.332 84.7561C382.606 83.7007 379.66 82.6894 376.494 81.722C369.195 79.3475 363.566 76.1376 359.609 72.0921C355.739 68.0467 353.804 62.6382 353.804 55.8665C353.804 50.238 355.168 45.4451 357.894 41.4876C360.708 37.4422 364.534 34.3642 369.371 32.2535C374.207 30.1428 379.704 29.0875 385.86 29.0875C392.192 29.0875 397.776 30.1868 402.613 32.3854C407.45 34.4961 411.276 37.6181 414.09 41.7514C416.904 45.7969 418.399 50.6338 418.575 56.2622H397.337C397.249 54.3274 396.677 52.5686 395.622 50.9856C394.654 49.4026 393.291 48.1274 391.532 47.16C389.861 46.1926 387.883 45.7089 385.596 45.7089C383.573 45.621 381.727 45.9288 380.056 46.6323C378.473 47.2479 377.154 48.2593 376.098 49.6664C375.131 50.9856 374.647 52.6565 374.647 54.6792C374.647 56.614 375.131 58.3289 376.098 59.8239C377.154 61.231 378.561 62.4623 380.32 63.5176C382.166 64.485 384.277 65.4084 386.652 66.2878C389.114 67.1673 391.796 68.0467 394.698 68.9261C399.359 70.5091 403.625 72.3999 407.494 74.5985C411.452 76.7092 414.618 79.5234 416.992 83.0412C419.455 86.471 420.686 91.0441 420.686 96.7604C420.686 101.773 419.367 106.39 416.728 110.612C414.178 114.833 410.44 118.219 405.516 120.769C400.679 123.32 394.654 124.595 387.443 124.595ZM457.138 124.595C451.598 124.595 446.892 123.451 443.023 121.165C439.241 118.878 436.339 115.536 434.317 111.139C432.382 106.654 431.414 101.202 431.414 94.7817V56.526H451.202V92.8029C451.202 97.7278 452.213 101.509 454.236 104.148C456.259 106.698 459.512 107.973 463.998 107.973C466.724 107.973 469.142 107.358 471.253 106.126C473.452 104.895 475.123 103.092 476.266 100.718C477.497 98.3434 478.113 95.4413 478.113 92.0115V56.526H497.9V123.012H480.619L479.036 112.458C477.101 116.064 474.287 119.01 470.593 121.297C466.9 123.495 462.415 124.595 457.138 124.595ZM511.739 152.033V56.526H529.284L531.526 65.2325C532.933 63.3857 534.56 61.6708 536.407 60.0878C538.254 58.5048 540.453 57.2736 543.003 56.3941C545.641 55.4267 548.719 54.9431 552.237 54.9431C558.393 54.9431 563.802 56.4821 568.463 59.5601C573.212 62.6382 576.993 66.8155 579.808 72.0921C582.622 77.2808 584.029 83.2171 584.029 89.9008C584.029 96.5845 582.578 102.565 579.676 107.841C576.861 113.03 573.08 117.119 568.331 120.11C563.582 123.1 558.261 124.595 552.369 124.595C547.62 124.595 543.531 123.759 540.101 122.088C536.671 120.417 533.813 118.087 531.526 115.097V152.033H511.739ZM547.356 107.314C550.522 107.314 553.336 106.61 555.799 105.203C558.349 103.708 560.328 101.641 561.735 99.003C563.142 96.3647 563.846 93.3306 563.846 89.9008C563.846 86.471 563.142 83.4369 561.735 80.7986C560.328 78.1603 558.349 76.0936 555.799 74.5985C553.336 73.0155 550.522 72.2241 547.356 72.2241C544.102 72.2241 541.2 73.0155 538.65 74.5985C536.187 76.0936 534.253 78.1603 532.845 80.7986C531.438 83.4369 530.735 86.427 530.735 89.7689C530.735 93.1987 531.438 96.2328 532.845 98.8711C534.253 101.509 536.187 103.576 538.65 105.071C541.2 106.566 544.102 107.314 547.356 107.314ZM628.628 124.595C621.768 124.595 615.744 123.188 610.555 120.373C605.367 117.471 601.277 113.47 598.287 108.369C595.385 103.18 593.934 97.2441 593.934 90.5604C593.934 83.7007 595.385 77.5886 598.287 72.2241C601.189 66.8595 605.235 62.6382 610.423 59.5601C615.612 56.4821 621.636 54.9431 628.496 54.9431C635.18 54.9431 641.028 56.3941 646.041 59.2963C651.053 62.1984 654.967 66.1559 657.781 71.1687C660.683 76.0936 662.134 81.8099 662.134 88.3178C662.134 89.1972 662.09 90.2086 662.003 91.3519C662.003 92.4072 661.915 93.5065 661.739 94.6498H608.049V83.1731H641.951C641.775 79.4794 640.412 76.5333 637.862 74.3347C635.399 72.0482 632.321 70.9049 628.628 70.9049C625.814 70.9049 623.263 71.5645 620.977 72.8836C618.69 74.2028 616.843 76.1815 615.436 78.8199C614.117 81.4582 613.457 84.8 613.457 88.8455V92.8029C613.457 95.881 614.029 98.6073 615.172 100.982C616.404 103.356 618.118 105.203 620.317 106.522C622.604 107.841 625.286 108.501 628.364 108.501C631.266 108.501 633.641 107.929 635.487 106.786C637.422 105.555 638.917 104.016 639.973 102.169H660.156C658.924 106.39 656.814 110.216 653.824 113.646C650.834 116.988 647.184 119.67 642.875 121.693C638.565 123.627 633.816 124.595 628.628 124.595ZM673.387 123.012V56.526H690.932L692.779 68.6623C694.538 65.8481 696.605 63.4296 698.979 61.4069C701.354 59.3842 704.08 57.8012 707.158 56.658C710.324 55.5147 713.71 54.9431 717.316 54.9431V75.9177H710.72C708.081 75.9177 705.663 76.2255 703.464 76.8411C701.354 77.3688 699.507 78.2922 697.924 79.6113C696.429 80.9305 695.242 82.7334 694.362 85.0199C693.571 87.2185 693.175 89.9887 693.175 93.3306V123.012H673.387ZM354.992 242.012V149.671H416.86V165.632H374.779V187.398H412.903V202.701H374.779V226.05H416.86V242.012H354.992ZM428.982 242.012V147.032H448.77V242.012H428.982ZM495.372 243.595C488.512 243.595 482.488 242.188 477.299 239.373C472.111 236.471 468.021 232.47 465.031 227.369C462.129 222.18 460.678 216.244 460.678 209.56C460.678 202.701 462.129 196.589 465.031 191.224C467.933 185.859 471.979 181.638 477.168 178.56C482.356 175.482 488.38 173.943 495.24 173.943C501.924 173.943 507.772 175.394 512.785 178.296C517.798 181.198 521.711 185.156 524.525 190.169C527.428 195.094 528.879 200.81 528.879 207.318C528.879 208.197 528.835 209.209 528.747 210.352C528.747 211.407 528.659 212.507 528.483 213.65H474.793V202.173H508.695C508.52 198.479 507.156 195.533 504.606 193.335C502.144 191.048 499.066 189.905 495.372 189.905C492.558 189.905 490.007 190.564 487.721 191.884C485.434 193.203 483.587 195.182 482.18 197.82C480.861 200.458 480.202 203.8 480.202 207.845V211.803C480.202 214.881 480.773 217.607 481.917 219.982C483.148 222.356 484.863 224.203 487.061 225.522C489.348 226.841 492.03 227.501 495.108 227.501C498.01 227.501 500.385 226.929 502.232 225.786C504.166 224.555 505.661 223.016 506.717 221.169H526.9C525.669 225.39 523.558 229.216 520.568 232.646C517.578 235.988 513.928 238.67 509.619 240.693C505.31 242.627 500.561 243.595 495.372 243.595Z" fill="#282828"/>
            </svg>
          </Link>
        </div>

        {/* Right side content */}
        <div className="flex items-center space-x-4">
          {/* Show selected components badge when there are selected components */}
          {selectedComponents.length > 0 && (
            <Badge variant="secondary" className="text-xs">
              {selectedComponents.length} selected
            </Badge>
          )}

          {/* Show auth buttons only when user is not logged in */}
          {!user && <AuthButtons />}
        </div>
      </div>
    </nav>
  );
};

export default Navbar;
